<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Thanh toán — Credit Card / PayPal / Bank</title>

    <!-- Bootstrap 4.6.2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <!-- Font Awesome 4.7 -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <style>
        body {
            background-color: #f6f9fb !important;
        }

        .rounded-lg {
            border-radius: 1rem;
        }

        .nav-pills .nav-link {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: .5rem;
        }

        .input-group .form-control {
            border-right: 0;
        }

        .input-group-append .input-group-text {
            background: #fff;
            border-left: 0;
        }
    </style>
</head>

<body>

    <div class="container py-5">
        <div class="row">
            <div class="col-lg-7 mx-auto">
                <div class="bg-white rounded-lg shadow-sm p-4 p-md-5">

                    <!-- Tabs -->
                    <ul role="tablist" class="nav bg-light nav-pills rounded-pill nav-fill mb-3">
                        <li class="nav-item">
                            <a data-toggle="pill" href="#nav-tab-card" class="nav-link active rounded-pill">
                                <i class="fa fa-credit-card"></i> Credit Card
                            </a>
                        </li>
                        <li class="nav-item">
                            <a data-toggle="pill" href="#nav-tab-paypal" class="nav-link rounded-pill">
                                <i class="fa fa-paypal"></i> Paypal
                            </a>
                        </li>
                        <li class="nav-item">
                            <a data-toggle="pill" href="#nav-tab-bank" class="nav-link rounded-pill">
                                <i class="fa fa-university"></i> Bank Transfer
                            </a>
                        </li>
                    </ul>

                    <div id="alertBox" class="alert d-none" role="alert"></div>

                    <!-- Tab contents -->
                    <div class="tab-content">

                        <!-- Credit Card -->
                        <div id="nav-tab-card" class="tab-pane fade show active">
                            <form id="cc-form" novalidate>
                                <div class="form-group">
                                    <label for="cc-name">Full name (on the card)</label>
                                    <input type="text" class="form-control" id="cc-name" name="ccName"
                                        placeholder="Jason Doe" autocomplete="cc-name" required>
                                </div>

                                <div class="form-group">
                                    <label for="cc-number">Card number</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="cc-number" name="ccNumber"
                                            placeholder="Your card number" inputmode="numeric" autocomplete="cc-number"
                                            maxlength="19" required>
                                        <div class="input-group-append">
                                            <span class="input-group-text text-muted">
                                                <i class="fa fa-cc-visa mx-1"></i>
                                                <i class="fa fa-cc-mastercard mx-1"></i>
                                                <i class="fa fa-cc-amex mx-1"></i>
                                            </span>
                                        </div>
                                    </div>
                                    <small class="form-text text-muted">We use Luhn check to validate your
                                        number.</small>
                                </div>

                                <div class="form-row">
                                    <div class="col-sm-8">
                                        <div class="form-group">
                                            <label>Expiration</label>
                                            <div class="form-row">
                                                <div class="col">
                                                    <input type="text" class="form-control" id="cc-mm" placeholder="MM"
                                                        inputmode="numeric" maxlength="2" autocomplete="cc-exp-month"
                                                        required>
                                                </div>
                                                <div class="col">
                                                    <input type="text" class="form-control" id="cc-yy" placeholder="YY"
                                                        inputmode="numeric" maxlength="2" autocomplete="cc-exp-year"
                                                        required>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-4">
                                        <div class="form-group mb-4">
                                            <label for="cc-cvv" title="Three or four digits on your card">CVV
                                                <i class="fa fa-question-circle"></i>
                                            </label>
                                            <input type="text" class="form-control" id="cc-cvv" inputmode="numeric"
                                                maxlength="4" autocomplete="cc-csc" required>
                                        </div>
                                    </div>
                                </div>

                                <button type="submit"
                                    class="btn btn-primary btn-block rounded-pill shadow-sm">Confirm</button>
                            </form>
                        </div>

                        <!-- PayPal -->
                        <div id="nav-tab-paypal" class="tab-pane fade">
                            <p>Paypal is the easiest way to pay online.</p>
                            <p>
                                <button type="button" class="btn btn-primary rounded-pill">
                                    <i class="fa fa-paypal mr-2"></i> Log into my Paypal
                                </button>
                            </p>
                            <p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed
                                do eiusmod tempor incididunt ut labore et dolore magna
                                aliqua.</p>
                        </div>

                        <!-- Bank -->
                        <div id="nav-tab-bank" class="tab-pane fade">
                            <h6>Bank account details</h6>
                            <dl class="mb-1">
                                <dt>Bank</dt>
                                <dd>THE WORLD BANK</dd>
                            </dl>
                            <dl class="mb-1">
                                <dt>Account number</dt>
                                <dd>7775877975</dd>
                            </dl>
                            <dl class="mb-3">
                                <dt>IBAN</dt>
                                <dd>CZ7775877975656</dd>
                            </dl>
                            <p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed
                                do eiusmod tempor incididunt ut labore et dolore magna
                                aliqua.</p>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- jQuery 3.6.0 + Bootstrap 4.6.2 Bundle (with Popper) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Helpers
        const onlyDigits = s => s.replace(/\D+/g, '');
        const luhnValid = num => {
            // Luhn algorithm
            const arr = onlyDigits(num).split('').reverse().map(x => +x);
            const sum = arr.reduce((acc, d, i) => {
                if (i % 2) {
                    const dbl = d * 2;
                    return acc + (dbl > 9 ? dbl - 9 : dbl);
                }
                return acc + d;
            }, 0);
            return sum % 10 === 0 && arr.length >= 13 && arr.length <= 19;
        };

        // Format card number 4-4-4-4
        $('#cc-number').on('input', function () {
            const digits = onlyDigits(this.value).slice(0, 19);
            const groups = digits.match(/.{1,4}/g) || [];
            this.value = groups.join(' ');
        });

        // Limit numeric fields
        $('#cc-mm, #cc-yy, #cc-cvv').on('input', function () {
            this.value = onlyDigits(this.value);
        });

        // Auto-append leading zero for month
        $('#cc-mm').on('blur', function () {
            const v = onlyDigits(this.value);
            if (v.length === 1 && v >= '1' && v <= '9') this.value = '0' + v;
        });

        // Basic expiry validation
        function expiryValid(mm, yy) {
            const m = parseInt(mm, 10), y = parseInt(yy, 10);
            if (!(m >= 1 && m <= 12) || isNaN(y)) return false;
            // assume YY in [00..99], map to 2000..2099
            const fullY = 2000 + y;
            const now = new Date();
            const exp = new Date(fullY, m - 1, 1);
            // set to end of that month
            exp.setMonth(exp.getMonth() + 1);
            return exp > now;
        }

        function showAlert(type, msg) {
            $('#alertBox').removeClass('d-none alert-success alert-danger')
                .addClass('alert-' + type)
                .html(msg);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Submit handler
        $('#cc-form').on('submit', function (e) {
            e.preventDefault();

            const name = $('#cc-name').val().trim();
            const number = $('#cc-number').val().trim();
            const mm = $('#cc-mm').val().trim();
            const yy = $('#cc-yy').val().trim();
            const cvv = $('#cc-cvv').val().trim();

            let errors = [];

            if (!name) errors.push('Please enter the full name on the card.');
            if (!luhnValid(number)) errors.push('Card number is invalid (failed Luhn check).');
            if (!expiryValid(mm, yy)) errors.push('Expiration date is invalid or already expired.');
            if (!(cvv.length === 3 || cvv.length === 4)) errors.push('CVV must be 3 or 4 digits.');

            if (errors.length) {
                showAlert('danger', '<strong>Validation errors:</strong><ul class="mb-0"><li>' + errors.join('</li><li>') + '</li></ul>');
                return;
            }

            showAlert('success', '<strong>Success!</strong> Your payment details look valid (demo).');
            // TODO: submit to your backend here
        });
    </script>
</body>

</html>